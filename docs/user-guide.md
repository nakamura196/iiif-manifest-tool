# 使い方ガイド

## コレクション管理

### コレクションの作成

1. ダッシュボードで「新規コレクション」ボタンをクリック
2. 必要情報を入力：
   - **コレクション名**（必須）: わかりやすい名前を付ける
   - **説明**（任意）: コレクションの内容を説明
   - **公開設定**: 公開/非公開を選択
3. 「作成」をクリック

### コレクションの編集

1. コレクション一覧から編集したいコレクションの「⋮」メニューをクリック
2. 「編集」を選択
3. 情報を更新して「保存」

### コレクションの削除

1. コレクション一覧から削除したいコレクションの「⋮」メニューをクリック
2. 「削除」を選択
3. 確認ダイアログで「削除」をクリック

⚠️ **注意**: コレクションを削除すると、含まれるすべてのアイテムも削除されます

## アイテム（画像）管理

### アイテムの追加

#### 方法1: ドラッグ&ドロップ

1. コレクションページを開く
2. 「新規アイテム」ボタンをクリック
3. 画像ファイルをドラッグ&ドロップエリアにドロップ
4. タイトルと説明を入力
5. 「作成して編集」をクリック

#### 方法2: ファイル選択

1. 「ファイルを選択」ボタンをクリック
2. アップロードしたい画像を選択（複数選択可）
3. タイトルと説明を入力
4. 「作成して編集」をクリック

#### 方法3: URLから追加

1. 「URLから追加」タブを選択
2. 画像のURLを入力
3. 「追加」をクリック

#### 方法4: IIIF画像の追加

1. 「info.jsonから追加」タブを選択
2. IIIF info.jsonのURLを入力
3. 「追加」をクリック

### アイテムの編集

1. アイテム一覧から編集したいアイテムをクリック
2. 編集画面で以下の情報を更新：
   - **基本情報**: タイトル、説明、公開設定
   - **位置情報**: 緯度、経度、場所の名前
   - **詳細情報**: 帰属表示、権利情報
   - **追加情報**: カスタムフィールド（作成年、作者など）
3. 「保存」をクリック

### IIIFコレクションの登録

外部のIIIFコレクションやマニフェストをインポートして、新しいコレクションとして管理することができます。

#### IIIFコレクションの追加方法

1. [ダッシュボード](/dashboard)で「[新規コレクション](/dashboard/collections/new)」ボタンをクリック
2. コレクションの基本情報（名前・説明）を入力
3. 「インポートモード」で「IIIF Collectionからインポート」を選択
4. IIIFコレクションまたはマニフェストのURLを入力
5. 「フェッチ」ボタンをクリックして内容を取得
6. プレビューで内容を確認（タイトル、アイテム数、サムネイルなど）
7. 問題なければ「作成」ボタンをクリック

![IIIF Collectionからインポート](/docs/images/iiif-collection-import.png)

#### 対応しているIIIF形式

- **IIIF Presentation API v3**: 推奨フォーマット
- **IIIF Presentation API v2**: 自動的にv3に変換されます
- **IIIF Collection**: 複数のマニフェストを含むコレクション
- **IIIF Manifest**: 単一のマニフェスト（コレクションとして扱われます）

#### インポート時の処理

- **メタデータの保持**: タイトル、説明、カスタムフィールドなど、すべてのメタデータが保持されます
- **多言語対応**: 日本語（ja）と英語（en）の両方の情報が自動的に取り込まれます
- **画像の参照**: 画像データは元のIIIFサーバーから参照されます（コピーはされません）
- **権利情報**: ライセンス、帰属表示（Attribution）、プロバイダー情報も保持されます
- **複数行の説明**: IIIFマニフェストの複数行の説明（summary）も配列として保持されます

### アイテムの並び替え

1. コレクションページで画像をドラッグ
2. 希望の位置にドロップ
3. 自動的に保存される

### アイテムの削除

1. アイテムの編集画面を開く
2. 「削除」ボタンをクリック
3. 確認ダイアログで「削除」を確認

## 表示モード

### グリッド表示

- デフォルトの表示モード
- 画像をサムネイルで一覧表示
- 各アイテムのタイトルと公開状態を表示

### 地図表示

1. 表示切り替えボタンで「地図」を選択
2. 位置情報が設定されたアイテムが地図上に表示
3. マーカーをクリックすると詳細を表示

## 公開と共有

### 公開設定

#### コレクションレベル
- **公開**: 誰でもアクセス可能
- **非公開**: ログインユーザーのみ

#### アイテムレベル
- **公開**: コレクションが公開の場合、誰でも閲覧可能
- **非公開**: 所有者のみ閲覧可能
- **限定公開**: 認証トークンを持つユーザーのみ

### 共有方法

#### 1. 直接リンクの共有

1. コレクションまたはアイテムのURLをコピー
2. メールやSNSで共有

#### 2. 認証トークンによる限定共有

1. アイテムの「認証キー」ボタンをクリック
2. トークンを生成
3. トークン付きURLを共有

#### 3. IIIF Manifestの共有

1. コレクションページの「IIIF」ボタンをクリック
2. Manifest URLをコピー
3. IIIF対応ビューアで開く

#### 4. Self Museumでの公開

1. コレクションページの「Self Museum」ボタンをクリック
2. Self Museumで公開ページを確認

## 検索とフィルタリング

### ダッシュボードでの検索

1. 検索バーにキーワードを入力
2. コレクション名と説明から検索
3. Enterキーまたは検索アイコンをクリック

### フィルタリング

- 公開/非公開でフィルター
- 作成日順/更新日順で並び替え

## ビューアの使い方

### Miradorビューア

1. アイテムの「Miradorで開く」をクリック
2. 高機能ビューアが開く
3. 以下の機能が利用可能：
   - ズーム/パン
   - 全画面表示
   - 画像の比較
   - アノテーション

### OpenSeadragonビューア

1. アイテムの詳細ページで自動的に表示
2. マウスホイールでズーム
3. ドラッグで移動

## データのエクスポート

### IIIF Manifest

1. コレクションページで「IIIF」ボタンをクリック
2. JSON形式のManifestをダウンロード

### 画像のダウンロード

1. アイテムの詳細ページを開く
2. 画像を右クリック
3. 「画像を保存」を選択

## キーボードショートカット

- `Ctrl/Cmd + S`: 編集内容を保存
- `Esc`: モーダルを閉じる
- `←/→`: アイテム間の移動（詳細表示時）

## IIIFコレクションの活用例

### 例1: 国立国会図書館デジタルコレクション

国立国会図書館のIIIFマニフェストをインポートする例：

1. ダッシュボードで「IIIFから追加」をクリック
2. 以下のようなURLを入力：
   ```
   https://www.dl.ndl.go.jp/api/iiif/1234567/manifest.json
   ```
3. プレビューで内容を確認
4. 「インポート」をクリック

### 例2: 東京大学デジタルアーカイブ

東京大学の古典籍コレクションをインポート：

1. 「IIIFから追加」をクリック
2. コレクションURLを入力
3. 複数のManifestが含まれている場合は、すべて一括インポート可能

### 例3: 複数機関のコレクションを統合

異なる機関のIIIFリソースを一つのコレクションにまとめる：

1. 新規コレクションを作成
2. 各機関のIIIF ManifestをURLから追加
3. 独自のメタデータや説明を追加
4. 統合されたコレクションとして公開

## ヒントとコツ

1. **大量アップロード**: 複数ファイルを一度に選択してアップロード
2. **メタデータの一括編集**: 複数アイテムを選択して一括更新
3. **テンプレート利用**: よく使うメタデータをテンプレート化
4. **バックアップ**: 重要なデータは定期的にエクスポート
5. **IIIFコレクションの定期更新**: 外部IIIFリソースは定期的に再同期して最新状態を保持

## トラブルシューティング

問題が発生した場合は、[トラブルシューティング](troubleshooting.md)を参照してください。